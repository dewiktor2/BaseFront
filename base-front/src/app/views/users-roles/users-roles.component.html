<div class="inner-content">
    <div class="group-edit-buttons">
        <button class="flex-button" nz-button nzType="default">
            Create role
        </button>
        <button class="flex-button" nz-button nzType="default">
            Add users to a role
        </button>
    </div>
    <nz-list [nzDataSource]="userSource" [nzRenderItem]="item" [nzItemLayout]="'horizontal'" [nzLoading]="loading">
        <ng-template #item let-item>
            <nz-list-item>
                <nz-collapse [nzBordered]="false">
                    <nz-collapse-panel [nzHeader]="item.name" [nzActive]="true" [nzExtra]="roleOptions">
                        <div class="badge-container">
                            {{item.description}}
                            <span class="badge-space badge badge-dark">
                                <span class="badge-content">{{item.users.length}}</span>
                            </span>
                        </div>
                        <nz-list-item-meta  [nzDescription]='nzDescription'>
                            <ng-template #nzDescription>
                                <nz-table #basicTable nzSize="middle" [nzData]="item.users">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>LastSession</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let user of basicTable.data">
                                            <td>
                                                <nz-avatar [ngStyle]="{ 'background-color': '#121212' }"
                                                    [nzText]="getShortName(user.name)" nzSize="large"
                                                    style="vertical-align: middle;"></nz-avatar>
                                                {{user.name}}
                                            </td>
                                            <td>{{user.email}}</td>
                                            <td>{{user.lastActivity}}</td>
                                            <td class="actionElem">

                                                <a nz-dropdown [nzDropdownMenu]="menu">
                                                    <i class="fas fa-ellipsis-h"></i>
                                                </a>
                                                <nz-dropdown-menu #menu="nzDropdownMenu">
                                                    <ul nz-menu>
                                                        <li nz-menu-item>Remove from group</li>
                                                    </ul>
                                                </nz-dropdown-menu>
                                            </td>
                                        </tr>
                                    </tbody>
                                </nz-table>
                            </ng-template>
                        </nz-list-item-meta>
                    </nz-collapse-panel>
                </nz-collapse>
                <ng-template #roleOptions>
                    <button class="flex-button" nz-button nzType="default" (click)="$event.stopPropagation()">
                        delete role
                    </button>
                </ng-template>
            </nz-list-item>
        </ng-template>
    </nz-list>
</div>